# Create a ready-to-deploy ZIP with index.html for the consent-based auto-capture camera page
html_content = """<!DOCTYPE html>
<html lang="ku">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>وێنەگرتنی خۆکار (بە ڕەزامەندی)</title>
  <style>
    :root {
      --bg: #0b1020; --fg: #e8ecf1; --muted:#9aa7b2; --accent:#27c3a9; --warn:#ff3b30;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:800px;margin:0 auto;padding:24px}
    h1{font-size:clamp(20px,3vw,28px);margin:0 0 8px}
    p{margin:6px 0;color:var(--muted)}
    .cam{position:relative;display:grid;place-items:center;background:#0e142a;border:1px solid #1d2747;border-radius:18px;padding:12px;margin-top:16px}
    video,canvas,img{max-width:100%;border-radius:14px}
    .banner{position:absolute;top:12px;left:12px;background:#1a233f;color:var(--fg);padding:6px 10px;border-radius:999px;font-size:14px;display:flex;gap:8px;align-items:center;border:1px solid #2b3766}
    .dot{width:10px;height:10px;border-radius:999px;background:var(--warn);box-shadow:0 0 10px rgba(255,59,48,.6)}
    .count{position:absolute;inset:0;display:grid;place-items:center;font-weight:700;font-size:clamp(36px,10vw,72px);text-shadow:0 6px 24px rgba(0,0,0,.6)}
    .hidden{display:none}
    .row{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    button{appearance:none;border:0;border-radius:12px;padding:10px 14px;background:#1a233f;color:var(--fg);cursor:pointer;font-weight:600;border:1px solid #2b3766}
    button:hover{background:#222d51}
    .ok{background:linear-gradient(180deg,#27c3a9,#1fb196);border:none}
    .warn{background:linear-gradient(180deg,#ff735b,#ff3b30);border:none}
    .note{font-size:13px;color:var(--muted);margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>📸 وێنەگرتنی خۆکار ــ بە پێی ڕێگەپێدانی تۆ</h1>
    <p>ئەم پەڕەیە کاتێک دەکرێتەوە، <strong>ڕەزامەندی</strong> دەوێت بۆ ئەوەی کامێرا کار بکات. دوواتر بە هەمان خۆکاریدا لە دوای ژمارەژمێرەکە وێنە دەگرێت.</p>

    <div class="cam">
      <div id="banner" class="banner hidden"><span class="dot"></span> کامێرا کاردەکات</div>
      <div id="count" class="count hidden">3</div>
      <video id="video" autoplay playsinline muted></video>
      <canvas id="canvas" class="hidden"></canvas>
      <img id="photo" class="hidden" alt="وێنەی گرتراو" />
    </div>

    <div class="row">
      <button id="retryBtn" class="warn hidden">🚫 ڕاگرتن/دووبارە هەوڵدان</button>
      <button id="downloadBtn" class="ok hidden">⬇️ دابەزاندنی وێنە</button>
    </div>

    <p class="note">تێبینی: هیچ دانەیەک بارنەکرێت/نەنێررێت. هەموو شتێک لە ناو ئامێرەکەتەوە ناوخۆییە.</p>
  </div>

  <script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const photo = document.getElementById('photo');
    const count = document.getElementById('count');
    const banner = document.getElementById('banner');
    const retryBtn = document.getElementById('retryBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    let stream;

    async function startCamera() {
      try {
        // داواکاری ڕێگەپێدان
        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
        video.srcObject = stream;
        banner.classList.remove('hidden');
        await video.play();
        // دوای دەستپێکردن، ژمارەژمێر
        await countdownAndSnap();
      } catch (err) {
        alert('پێویستە ڕێگە پێبدەیت بۆ کامێرا لە ڕووناکی و پاراستن. هەڵە: ' + err.message);
      }
    }

    function stopCamera() {
      if (stream) {
        stream.getTracks().forEach(t => t.stop());
        stream = null;
      }
      banner.classList.add('hidden');
    }

    function snap() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      const data = canvas.toDataURL('image/png');
      photo.src = data;
      photo.classList.remove('hidden');
      downloadBtn.classList.remove('hidden');
      retryBtn.classList.remove('hidden');
    }

    async function countdownAndSnap() {
      count.classList.remove('hidden');
      let n = 3;
      count.textContent = n;
      await new Promise(resolve => {
        const iv = setInterval(() => {
          n -= 1;
          count.textContent = n > 0 ? n : '📸';
          if (n <= 0) {
            clearInterval(iv);
            resolve();
          }
        }, 1000);
      });
      snap();
      stopCamera();
      setTimeout(() => count.classList.add('hidden'), 600);
    }

    retryBtn.addEventListener('click', async () => {
      // پاککردنەوەی داهاتوو
      photo.classList.add('hidden');
      downloadBtn.classList.add('hidden');
      retryBtn.classList.add('hidden');
      await startCamera();
    });

    downloadBtn.addEventListener('click', () => {
      const a = document.createElement('a');
      a.href = photo.src;
      a.download = 'photo-' + new Date().toISOString().replace(/[:.]/g,'-') + '.png';
      a.click();
    });

    // بەھۆی پاراستنەوە، تەنها لە کاتی کراوەبوون دا هەوڵ دەدات
    window.addEventListener('load', () => {
      if (!('mediaDevices' in navigator)) {
        alert('براوزەرەکەت پشتیوانی لە کامێرا ناکات. تکایە لە کرۆم/سافاری/فایرفۆکس بەکاربهێنە.');
        return;
      }
      startCamera();
    });
  </script>
</body>
</html>
"""
import zipfile, os, textwrap, io, pathlib, json

# Create a folder and zip it
base = "/mnt/data/auto_camera_site"
os.makedirs(base, exist_ok=True)
index_path = os.path.join(base, "index.html")
with open(index_path, "w", encoding="utf-8") as f:
    f.write(html_content)

zip_path = "/mnt/data/auto-camera.zip"
with zipfile.ZipFile(zip_path, "w", zipfile.ZIP_DEFLATED) as zf:
    zf.write(index_path, arcname="index.html")

zip_path
