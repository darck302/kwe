# Create a ready-to-deploy ZIP with index.html for the consent-based auto-capture camera page
html_content = """<!DOCTYPE html>
<html lang="ku">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÙˆÛÙ†Û•Ú¯Ø±ØªÙ†ÛŒ Ø®Û†Ú©Ø§Ø± (Ø¨Û• Ú•Û•Ø²Ø§Ù…Û•Ù†Ø¯ÛŒ)</title>
  <style>
    :root {
      --bg: #0b1020; --fg: #e8ecf1; --muted:#9aa7b2; --accent:#27c3a9; --warn:#ff3b30;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:800px;margin:0 auto;padding:24px}
    h1{font-size:clamp(20px,3vw,28px);margin:0 0 8px}
    p{margin:6px 0;color:var(--muted)}
    .cam{position:relative;display:grid;place-items:center;background:#0e142a;border:1px solid #1d2747;border-radius:18px;padding:12px;margin-top:16px}
    video,canvas,img{max-width:100%;border-radius:14px}
    .banner{position:absolute;top:12px;left:12px;background:#1a233f;color:var(--fg);padding:6px 10px;border-radius:999px;font-size:14px;display:flex;gap:8px;align-items:center;border:1px solid #2b3766}
    .dot{width:10px;height:10px;border-radius:999px;background:var(--warn);box-shadow:0 0 10px rgba(255,59,48,.6)}
    .count{position:absolute;inset:0;display:grid;place-items:center;font-weight:700;font-size:clamp(36px,10vw,72px);text-shadow:0 6px 24px rgba(0,0,0,.6)}
    .hidden{display:none}
    .row{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    button{appearance:none;border:0;border-radius:12px;padding:10px 14px;background:#1a233f;color:var(--fg);cursor:pointer;font-weight:600;border:1px solid #2b3766}
    button:hover{background:#222d51}
    .ok{background:linear-gradient(180deg,#27c3a9,#1fb196);border:none}
    .warn{background:linear-gradient(180deg,#ff735b,#ff3b30);border:none}
    .note{font-size:13px;color:var(--muted);margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸ“¸ ÙˆÛÙ†Û•Ú¯Ø±ØªÙ†ÛŒ Ø®Û†Ú©Ø§Ø± Ù€Ù€ Ø¨Û• Ù¾ÛÛŒ Ú•ÛÚ¯Û•Ù¾ÛØ¯Ø§Ù†ÛŒ ØªÛ†</h1>
    <p>Ø¦Û•Ù… Ù¾Û•Ú•Û•ÛŒÛ• Ú©Ø§ØªÛÚ© Ø¯Û•Ú©Ø±ÛØªÛ•ÙˆÛ•ØŒ <strong>Ú•Û•Ø²Ø§Ù…Û•Ù†Ø¯ÛŒ</strong> Ø¯Û•ÙˆÛØª Ø¨Û† Ø¦Û•ÙˆÛ•ÛŒ Ú©Ø§Ù…ÛØ±Ø§ Ú©Ø§Ø± Ø¨Ú©Ø§Øª. Ø¯ÙˆÙˆØ§ØªØ± Ø¨Û• Ù‡Û•Ù…Ø§Ù† Ø®Û†Ú©Ø§Ø±ÛŒØ¯Ø§ Ù„Û• Ø¯ÙˆØ§ÛŒ Ú˜Ù…Ø§Ø±Û•Ú˜Ù…ÛØ±Û•Ú©Û• ÙˆÛÙ†Û• Ø¯Û•Ú¯Ø±ÛØª.</p>

    <div class="cam">
      <div id="banner" class="banner hidden"><span class="dot"></span> Ú©Ø§Ù…ÛØ±Ø§ Ú©Ø§Ø±Ø¯Û•Ú©Ø§Øª</div>
      <div id="count" class="count hidden">3</div>
      <video id="video" autoplay playsinline muted></video>
      <canvas id="canvas" class="hidden"></canvas>
      <img id="photo" class="hidden" alt="ÙˆÛÙ†Û•ÛŒ Ú¯Ø±ØªØ±Ø§Ùˆ" />
    </div>

    <div class="row">
      <button id="retryBtn" class="warn hidden">ğŸš« Ú•Ø§Ú¯Ø±ØªÙ†/Ø¯ÙˆÙˆØ¨Ø§Ø±Û• Ù‡Û•ÙˆÚµØ¯Ø§Ù†</button>
      <button id="downloadBtn" class="ok hidden">â¬‡ï¸ Ø¯Ø§Ø¨Û•Ø²Ø§Ù†Ø¯Ù†ÛŒ ÙˆÛÙ†Û•</button>
    </div>

    <p class="note">ØªÛØ¨ÛŒÙ†ÛŒ: Ù‡ÛŒÚ† Ø¯Ø§Ù†Û•ÛŒÛ•Ú© Ø¨Ø§Ø±Ù†Û•Ú©Ø±ÛØª/Ù†Û•Ù†ÛØ±Ø±ÛØª. Ù‡Û•Ù…ÙˆÙˆ Ø´ØªÛÚ© Ù„Û• Ù†Ø§Ùˆ Ø¦Ø§Ù…ÛØ±Û•Ú©Û•ØªÛ•ÙˆÛ• Ù†Ø§ÙˆØ®Û†ÛŒÛŒÛ•.</p>
  </div>

  <script>
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const photo = document.getElementById('photo');
    const count = document.getElementById('count');
    const banner = document.getElementById('banner');
    const retryBtn = document.getElementById('retryBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    let stream;

    async function startCamera() {
      try {
        // Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ Ú•ÛÚ¯Û•Ù¾ÛØ¯Ø§Ù†
        stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
        video.srcObject = stream;
        banner.classList.remove('hidden');
        await video.play();
        // Ø¯ÙˆØ§ÛŒ Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†ØŒ Ú˜Ù…Ø§Ø±Û•Ú˜Ù…ÛØ±
        await countdownAndSnap();
      } catch (err) {
        alert('Ù¾ÛÙˆÛŒØ³ØªÛ• Ú•ÛÚ¯Û• Ù¾ÛØ¨Ø¯Û•ÛŒØª Ø¨Û† Ú©Ø§Ù…ÛØ±Ø§ Ù„Û• Ú•ÙˆÙˆÙ†Ø§Ú©ÛŒ Ùˆ Ù¾Ø§Ø±Ø§Ø³ØªÙ†. Ù‡Û•ÚµÛ•: ' + err.message);
      }
    }

    function stopCamera() {
      if (stream) {
        stream.getTracks().forEach(t => t.stop());
        stream = null;
      }
      banner.classList.add('hidden');
    }

    function snap() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      const data = canvas.toDataURL('image/png');
      photo.src = data;
      photo.classList.remove('hidden');
      downloadBtn.classList.remove('hidden');
      retryBtn.classList.remove('hidden');
    }

    async function countdownAndSnap() {
      count.classList.remove('hidden');
      let n = 3;
      count.textContent = n;
      await new Promise(resolve => {
        const iv = setInterval(() => {
          n -= 1;
          count.textContent = n > 0 ? n : 'ğŸ“¸';
          if (n <= 0) {
            clearInterval(iv);
            resolve();
          }
        }, 1000);
      });
      snap();
      stopCamera();
      setTimeout(() => count.classList.add('hidden'), 600);
    }

    retryBtn.addEventListener('click', async () => {
      // Ù¾Ø§Ú©Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¯Ø§Ù‡Ø§ØªÙˆÙˆ
      photo.classList.add('hidden');
      downloadBtn.classList.add('hidden');
      retryBtn.classList.add('hidden');
      await startCamera();
    });

    downloadBtn.addEventListener('click', () => {
      const a = document.createElement('a');
      a.href = photo.src;
      a.download = 'photo-' + new Date().toISOString().replace(/[:.]/g,'-') + '.png';
      a.click();
    });

    // Ø¨Û•Ú¾Û†ÛŒ Ù¾Ø§Ø±Ø§Ø³ØªÙ†Û•ÙˆÛ•ØŒ ØªÛ•Ù†Ù‡Ø§ Ù„Û• Ú©Ø§ØªÛŒ Ú©Ø±Ø§ÙˆÛ•Ø¨ÙˆÙˆÙ† Ø¯Ø§ Ù‡Û•ÙˆÚµ Ø¯Û•Ø¯Ø§Øª
    window.addEventListener('load', () => {
      if (!('mediaDevices' in navigator)) {
        alert('Ø¨Ø±Ø§ÙˆØ²Û•Ø±Û•Ú©Û•Øª Ù¾Ø´ØªÛŒÙˆØ§Ù†ÛŒ Ù„Û• Ú©Ø§Ù…ÛØ±Ø§ Ù†Ø§Ú©Ø§Øª. ØªÚ©Ø§ÛŒÛ• Ù„Û• Ú©Ø±Û†Ù…/Ø³Ø§ÙØ§Ø±ÛŒ/ÙØ§ÛŒØ±ÙÛ†Ú©Ø³ Ø¨Û•Ú©Ø§Ø±Ø¨Ù‡ÛÙ†Û•.');
        return;
      }
      startCamera();
    });
  </script>
</body>
</html>
"""
import zipfile, os, textwrap, io, pathlib, json

# Create a folder and zip it
base = "/mnt/data/auto_camera_site"
os.makedirs(base, exist_ok=True)
index_path = os.path.join(base, "index.html")
with open(index_path, "w", encoding="utf-8") as f:
    f.write(html_content)

zip_path = "/mnt/data/auto-camera.zip"
with zipfile.ZipFile(zip_path, "w", zipfile.ZIP_DEFLATED) as zf:
    zf.write(index_path, arcname="index.html")

zip_path
